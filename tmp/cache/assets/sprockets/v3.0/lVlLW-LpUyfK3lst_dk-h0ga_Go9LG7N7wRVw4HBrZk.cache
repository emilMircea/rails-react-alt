I"o(function() {
  var TodoStore;

  TodoStore = (function() {
    TodoStore.displayName = 'TodoStore';

    function TodoStore() {
      this.bindActions(TodoActions);
      this.todos = [];
      this.exportPublicMethods({
        getTodos: this.getTodos
      });
    }

    TodoStore.prototype.onInitData = function(props) {
      return this.todos = props.todos;
    };

    TodoStore.prototype.onSubmitTodo = function(name) {
      $.ajax({
        type: 'POST',
        url: '/todos',
        data: {
          todo: {
            name: name
          }
        },
        success: (function(_this) {
          return function(response) {
            _this.todos.push(response);
            return _this.emitChange();
          };
        })(this),
        error: (function(_this) {
          return function(response) {
            console.log('error');
            return console.log(response);
          };
        })(this)
      });
      return false;
    };

    TodoStore.prototype.onDeleteTodo = function(todo_id) {
      this.setState((function(_this) {
        return function(state) {
          return $.ajax({
            type: 'DELETE',
            url: "/todos/" + todo_id,
            success: function(response) {
              _.remove(_this.todos, {
                id: response.id
              });
              return _this.emitChange();
            },
            error: function(response) {
              console.log('error');
              return console.log(response);
            }
          });
        };
      })(this));
      return false;
      return {
        onUpdateTodo: function(todo_id) {
          return console.log('update btn was clicked');
        }
      };
    };

    TodoStore.prototype.getTodos = function() {
      return this.getState().todos;
    };

    return TodoStore;

  })();

  window.TodoStore = alt.createStore(TodoStore);

}).call(this);
:ET