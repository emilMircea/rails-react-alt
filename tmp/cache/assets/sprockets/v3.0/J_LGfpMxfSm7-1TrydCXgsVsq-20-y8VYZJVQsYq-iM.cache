I"Q(function() {
  var TodoStore;

  TodoStore = (function() {
    TodoStore.displayName = 'TodoStore';

    function TodoStore() {
      this.bindActions(TodoActions);
      this.todos = [];
      this.exportPublicMethods({
        getTodos: this.getTodos
      });
    }

    TodoStore.prototype.onInitData = function(props) {
      return this.todos = props.todos;
    };

    TodoStore.prototype.onSubmitTodo = function(name) {
      $.ajax({
        type: 'POST',
        url: '/todos',
        data: {
          todo: {
            name: name
          }
        },
        success: (function(_this) {
          return function(response) {
            _this.todos.push(response);
            return _this.emitChange();
          };
        })(this),
        error: (function(_this) {
          return function(response) {
            console.log('error');
            return console.log(response);
          };
        })(this)
      });
      return false;
    };

    TodoStore.prototype.onDeleteTodo = function(todo_id) {
      this.setState((function(_this) {
        return function(state) {
          return state.todos._.drop(0, 1);
        };
      })(this));
      $.ajax({
        type: 'DELETE',
        url: "/todos/" + todo_id,
        success: (function(_this) {
          return function(response) {
            _.find(_this.todos, {
              id: response.id
            });
            return _this.emitChange();
          };
        })(this),
        error: (function(_this) {
          return function(response) {
            console.log('error');
            return console.log(response);
          };
        })(this)
      });
      return false;
    };

    TodoStore.prototype.getTodos = function() {
      return this.getState().todos;
    };

    return TodoStore;

  })();

  window.TodoStore = alt.createStore(TodoStore);

}).call(this);
:ET